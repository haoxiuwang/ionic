import{r as o,j as a,L as c}from"./Home-DmwyrfO4.js";function u({ctx:e}){const[i,d]=o.useState(!1);if(console.log("abc:",e.last.chapterid),o.useEffect(()=>{(async()=>{if(e.book=e.book||e.books.find(({name:n})=>n==e.last.bookid),e.chapter=e.book.chapters.find(({name:n})=>n==e.last.chapterid),!e.audio.current.paused){e.refresh();return}console.log(e.chapter.name,"chapter",e.last.chapterid),await e.audio.load(),e.refresh()})()},[e.last.chapterid]),!e.chapter||!e.audio.current)return;const{book:l,chapter:t}=e,s=e.audio.current;return a.jsx("div",{onClick:()=>{s.paused?s.play():s.pause(),e.refresh()},className:"cursor-pointer fixed inset-0 bg-black/70 flex flex-col place-items-center place-content-center space-y-2",children:a.jsxs("div",{className:"w-full flex flex-col space-y-10 place-items-center ",children:[a.jsxs(c,{to:"/book",className:`absolute inset-x-0 top-4  p-8 text-lg text-center ${s.paused?"":"animate-pulse"}`,children:[" ",a.jsxs("div",{className:"text-white text font-thin",children:[l.name," - ",t.name," "]})]}),a.jsx("div",{className:"w-full flex flex-col place-items-center place-content-center",children:a.jsx("div",{style:{backgroundImage:`url(/assets/images/${l.cover})`},className:`rounded-full bg-cover bg-center bg-no-repeat w-[80%] aspect-square  ${s&&!s.paused?"animate-spin":""}`,src:`/assets/images/${l.cover}`})}),a.jsxs("div",{className:"absolute bottom-20 w-full flex place-items-center place-content-center space-x-2",children:[a.jsx("div",{className:" px-6 bg-green-200 rounded-full",onClick:r=>{r.stopPropagation(),e.audio.next(-1)},children:"上一回"}),a.jsx("div",{className:"px-6 bg-green-200 rounded-full",onClick:r=>{r.stopPropagation(),e.audio.next()},children:"下一回"})]})]})})}export{u as default};
